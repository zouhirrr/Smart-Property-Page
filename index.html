<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qrestige Pro | Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø³ØªÙ‚Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

    <style>
        :root { --dark: #0f172a; --gold: #f59e0b; --green: #10b981; }
        * { box-sizing: border-box; font-family: 'Tajawal', sans-serif; }
        body { background: #f1f5f9; margin: 0; padding: 20px; display: flex; justify-content: center; }

        .app-container { 
            background: white; width: 100%; max-width: 900px; padding: 30px; 
            border-radius: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.05);
            display: grid; grid-template-columns: 1fr 350px; gap: 30px;
        }

        .inputs-area { display: flex; flex-direction: column; gap: 15px; }
        .preview-area { background: #1e293b; padding: 15px; border-radius: 45px; border: 10px solid #0f172a; height: 650px; position: sticky; top: 20px; }
        
        .field { display: flex; flex-direction: column; gap: 5px; }
        label { font-size: 13px; font-weight: 900; color: #475569; }
        input, textarea { padding: 12px; border: 2px solid #e2e8f0; border-radius: 12px; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--gold); }

        .main-btn { 
            background: var(--dark); color: white; border: none; padding: 18px; 
            border-radius: 15px; font-weight: 900; cursor: pointer; font-size: 16px;
            margin-top: 10px; transition: 0.3s;
        }
        .main-btn:hover { transform: scale(1.02); background: #000; }

        #qr-box { 
            display: none; margin-top: 20px; text-align: center; padding: 20px; 
            background: #fffbeb; border: 2px dashed var(--gold); border-radius: 20px; 
        }

        /* ØªØµÙ…ÙŠÙ… Ø´Ø§Ø´Ø© Ø§Ù„Ø²Ø¨ÙˆÙ† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
        .screen { background: white; height: 100%; border-radius: 30px; overflow-y: auto; overflow-x: hidden; scrollbar-width: none; }
        .screen-img { height: 200px; background: #cbd5e1 center/cover; position: relative; }
        .screen-price { position: absolute; bottom: 10px; right: 10px; background: var(--gold); padding: 5px 15px; border-radius: 10px; font-weight: 900; font-size: 18px; }
        .screen-body { padding: 20px; text-align: right; }

        @media (max-width: 850px) { .app-container { grid-template-columns: 1fr; } .preview-area { position: static; height: 600px; } }
    </style>
</head>
<body>

<div class="app-container">
    
    <div class="inputs-area">
        <h2 style="margin:0; color:var(--dark);">âœ¨ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h2>
        <p style="margin:0 0 20px 0; color:#64748b; font-size:14px;">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙˆØ±Ø§Ù‹</p>

        <div class="field">
            <label>ØµÙˆØ±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</label>
            <input type="file" accept="image/*" onchange="updateImg(this)">
        </div>

        <div class="field">
            <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±</label>
            <input type="text" id="ititle" placeholder="Ù…Ø«Ù„Ø§Ù‹: ÙÙŠÙ„Ø§ Ù…ÙˆØ¯Ø±Ù† Ù„Ù„Ø¨ÙŠØ¹" oninput="sync()">
        </div>

        <div class="field">
            <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</label>
            <input type="text" id="iprice" placeholder="2,500,000" oninput="sync()">
        </div>

        <div class="field">
            <label>ÙˆØµÙ Ø§Ù„Ø¹Ù‚Ø§Ø±</label>
            <textarea id="idesc" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªÙØ§ØµÙŠÙ„..." oninput="sync()"></textarea>
        </div>

        <button class="main-btn" onclick="generateQR()">ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø§Ø± (QR) ğŸš€</button>

        <div id="qr-box">
            <div id="qr-output" style="display: flex; justify-content: center; margin-bottom: 10px;"></div>
            <p style="font-weight: 900; font-size: 14px; margin: 5px 0;">Ø§Ù„ÙƒÙˆØ¯ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„!</p>
            <button onclick="downloadQR()" style="background:none; border:1px solid #ccc; padding:5px 10px; border-radius:5px; cursor:pointer; font-size:12px;">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ ÙƒØµÙˆØ±Ø© ğŸ’¾</button>
        </div>
    </div>

    <div class="preview-area">
        <div class="screen">
            <div id="v-img" class="screen-img">
                <div id="v-price" class="screen-price">0 Ø±.Ø³</div>
            </div>
            <div class="screen-body">
                <h3 id="v-title" style="margin:0; color:var(--dark);">Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±</h3>
                <p id="v-desc" style="font-size:14px; color:#475569; line-height:1.6; margin:15px 0;">Ø§Ù„ÙˆØµÙ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...</p>
                
                <div style="background:#f1f5f9; padding:15px; border-radius:15px; display:flex; justify-content:space-around; margin-bottom:20px;">
                    <div style="text-align:center;"><b style="font-size:20px;">1,240</b><br><span style="font-size:10px;">Ù…Ø´Ø§Ù‡Ø¯Ø©</span></div>
                    <div style="text-align:center;"><b style="font-size:20px; color:var(--green);">42</b><br><span style="font-size:10px;">Ù…Ù‡ØªÙ…</span></div>
                </div>

                <div style="background:var(--green); color:white; text-align:center; padding:15px; border-radius:12px; font-weight:900;">ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</div>
            </div>
        </div>
    </div>

</div>

<script>
    // 1. Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØµÙˆØ±Ø©
    function updateImg(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => document.getElementById('v-img').style.backgroundImage = `url('${e.target.result}')`;
            reader.readAsDataURL(input.files[0]);
        }
    }

    // 2. Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù†ØµÙˆØµ
    function sync() {
        document.getElementById('v-title').innerText = document.getElementById('ititle').value || "Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±";
        document.getElementById('v-price').innerText = (document.getElementById('iprice').value || "0") + " Ø±.Ø³";
        document.getElementById('v-desc').innerText = document.getElementById('idesc').value || "Ø§Ù„ÙˆØµÙ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...";
    }

    // 3. ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¢Ù…Ù†Ø©)
    function generateQR() {
        const title = document.getElementById('ititle').value;
        if(!title) { alert("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹!"); return; }

        const container = document.getElementById('qr-output');
        container.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ…

        try {
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙƒØªØ¨Ø©
            new QRCode(container, {
                text: "https://your-site.com/view?id=" + Date.now(),
                width: 160,
                height: 160,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
            document.getElementById('qr-box').style.display = 'block';
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        } catch (err) {
            // Ø­Ù„ Ø¨Ø¯ÙŠÙ„ ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ Ø§Ù„Ù…ÙƒØªØ¨Ø©: Ø§Ø³ØªØ®Ø¯Ø§Ù… Google Charts API ÙƒØ®Ø·Ø© Ø¨Ø¯ÙŠÙ„Ø© ÙÙˆØ±ÙŠØ©
            const googleQR = `https://chart.googleapis.com/chart?chs=160x160&cht=qr&chl=${encodeURIComponent(window.location.href)}&choe=UTF-8`;
            container.innerHTML = `<img src="${googleQR}" alt="QR Code">`;
            document.getElementById('qr-box').style.display = 'block';
        }
    }

    // 4. ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ ÙƒØµÙˆØ±Ø©
    function downloadQR() {
        const img = document.querySelector('#qr-output img');
        if(!img) return;
        const link = document.createElement('a');
        link.href = img.src;
        link.download = 'Property-QR.png';
        link.click();
    }
</script>

</body>
</html>
